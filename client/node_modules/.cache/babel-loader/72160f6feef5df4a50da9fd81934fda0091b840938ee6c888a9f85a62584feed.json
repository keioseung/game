{"ast":null,"code":"var _jsxFileName = \"/workspaces/game/client/src/components/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TILE_SIZE = 32;\nconst COLORS = ['#eee', '#444']; // 0: 바닥, 1: 벽\n\nexport default function Map({\n  map,\n  players,\n  monsters,\n  items,\n  meId,\n  onMove,\n  onAttack\n}) {\n  _s();\n  const canvasRef = useRef();\n  useEffect(() => {\n    const ctx = canvasRef.current.getContext('2d');\n    ctx.clearRect(0, 0, map[0].length * TILE_SIZE, map.length * TILE_SIZE);\n    // 맵\n    for (let y = 0; y < map.length; y++) {\n      for (let x = 0; x < map[0].length; x++) {\n        ctx.fillStyle = COLORS[map[y][x]];\n        ctx.fillRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\n      }\n    }\n    // 몬스터\n    monsters.forEach(m => {\n      ctx.fillStyle = 'green';\n      ctx.fillRect(m.x * TILE_SIZE, m.y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\n      ctx.fillStyle = '#000';\n      ctx.fillText(`M(${m.hp})`, m.x * TILE_SIZE + 2, m.y * TILE_SIZE + 14);\n    });\n    // 아이템\n    items.forEach(it => {\n      ctx.fillStyle = 'yellow';\n      ctx.beginPath();\n      ctx.arc(it.x * TILE_SIZE + 16, it.y * TILE_SIZE + 16, 10, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n    // 플레이어\n    Object.values(players).forEach(p => {\n      ctx.fillStyle = p.id === meId ? 'blue' : 'red';\n      ctx.fillRect(p.x * TILE_SIZE, p.y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\n      ctx.fillStyle = '#fff';\n      ctx.fillText(`${p.name}(${p.hp})`, p.x * TILE_SIZE + 2, p.y * TILE_SIZE + 28);\n    });\n  }, [map, players, monsters, items, meId]);\n\n  // 키보드 이동/공격\n  useEffect(() => {\n    const onKeyDown = e => {\n      if (e.key === 'ArrowUp') onMove('up');\n      if (e.key === 'ArrowDown') onMove('down');\n      if (e.key === 'ArrowLeft') onMove('left');\n      if (e.key === 'ArrowRight') onMove('right');\n      if (e.key === ' ') onAttack();\n    };\n    window.addEventListener('keydown', onKeyDown);\n    return () => window.removeEventListener('keydown', onKeyDown);\n  }, [onMove, onAttack]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    width: map[0].length * TILE_SIZE,\n    height: map.length * TILE_SIZE,\n    style: {\n      border: '2px solid #888',\n      marginBottom: 4\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(Map, \"1O11hef6JMAr7xpSnL0aZ5Ib60Q=\");\n_c = Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","TILE_SIZE","COLORS","Map","map","players","monsters","items","meId","onMove","onAttack","_s","canvasRef","ctx","current","getContext","clearRect","length","y","x","fillStyle","fillRect","forEach","m","fillText","hp","it","beginPath","arc","Math","PI","fill","Object","values","p","id","name","onKeyDown","e","key","window","addEventListener","removeEventListener","ref","width","height","style","border","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/workspaces/game/client/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nconst TILE_SIZE = 32;\r\nconst COLORS = ['#eee', '#444']; // 0: 바닥, 1: 벽\r\n\r\nexport default function Map({ map, players, monsters, items, meId, onMove, onAttack }) {\r\n  const canvasRef = useRef();\r\n  useEffect(() => {\r\n    const ctx = canvasRef.current.getContext('2d');\r\n    ctx.clearRect(0, 0, map[0].length * TILE_SIZE, map.length * TILE_SIZE);\r\n    // 맵\r\n    for (let y = 0; y < map.length; y++) {\r\n      for (let x = 0; x < map[0].length; x++) {\r\n        ctx.fillStyle = COLORS[map[y][x]];\r\n        ctx.fillRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\r\n      }\r\n    }\r\n    // 몬스터\r\n    monsters.forEach(m => {\r\n      ctx.fillStyle = 'green';\r\n      ctx.fillRect(m.x * TILE_SIZE, m.y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\r\n      ctx.fillStyle = '#000';\r\n      ctx.fillText(`M(${m.hp})`, m.x * TILE_SIZE + 2, m.y * TILE_SIZE + 14);\r\n    });\r\n    // 아이템\r\n    items.forEach(it => {\r\n      ctx.fillStyle = 'yellow';\r\n      ctx.beginPath();\r\n      ctx.arc(it.x * TILE_SIZE + 16, it.y * TILE_SIZE + 16, 10, 0, 2 * Math.PI);\r\n      ctx.fill();\r\n    });\r\n    // 플레이어\r\n    Object.values(players).forEach(p => {\r\n      ctx.fillStyle = p.id === meId ? 'blue' : 'red';\r\n      ctx.fillRect(p.x * TILE_SIZE, p.y * TILE_SIZE, TILE_SIZE, TILE_SIZE);\r\n      ctx.fillStyle = '#fff';\r\n      ctx.fillText(`${p.name}(${p.hp})`, p.x * TILE_SIZE + 2, p.y * TILE_SIZE + 28);\r\n    });\r\n  }, [map, players, monsters, items, meId]);\r\n\r\n  // 키보드 이동/공격\r\n  useEffect(() => {\r\n    const onKeyDown = e => {\r\n      if (e.key === 'ArrowUp') onMove('up');\r\n      if (e.key === 'ArrowDown') onMove('down');\r\n      if (e.key === 'ArrowLeft') onMove('left');\r\n      if (e.key === 'ArrowRight') onMove('right');\r\n      if (e.key === ' ') onAttack();\r\n    };\r\n    window.addEventListener('keydown', onKeyDown);\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  }, [onMove, onAttack]);\r\n\r\n  return (\r\n    <canvas ref={canvasRef} width={map[0].length * TILE_SIZE} height={map.length * TILE_SIZE} style={{ border: '2px solid #888', marginBottom: 4 }} />\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}